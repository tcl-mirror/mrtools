<html><head>
<title>micca-DSL - Micca Configuration DSL</title>
<style type="text/css"><!--
    HTML {
	background: 	#FFFFFF;
	color: 		black;
    }
    BODY {
	background: 	#FFFFFF;
	color:	 	black;
    }
    DIV.doctools {
	margin-left:	10%;
	margin-right:	10%;
    }
    DIV.doctools H1,DIV.doctools H2 {
	margin-left:	-5%;
    }
    H1, H2, H3, H4 {
	margin-top: 	1em;
	font-family:	sans-serif;
	font-size:	large;
	color:		#005A9C;
	background: 	transparent;
	text-align:		left;
    }
    H1.doctools_title {
	text-align: center;
    }
    UL,OL {
	margin-right: 0em;
	margin-top: 3pt;
	margin-bottom: 3pt;
    }
    UL LI {
	list-style: disc;
    }
    OL LI {
	list-style: decimal;
    }
    DT {
	padding-top: 	1ex;
    }
    UL.doctools_toc,UL.doctools_toc UL, UL.doctools_toc UL UL {
	font:		normal 12pt/14pt sans-serif;
	list-style:	none;
    }
    LI.doctools_section, LI.doctools_subsection {
	list-style: 	none;
	margin-left: 	0em;
	text-indent:	0em;
	padding: 	0em;
    }
    PRE {
	display: 	block;
	font-family:	monospace;
	white-space:	pre;
	margin:		0%;
	padding-top:	0.5ex;
	padding-bottom:	0.5ex;
	padding-left:	1ex;
	padding-right:	1ex;
	width:		100%;
    }
    PRE.doctools_example {
	color: 		black;
	background: 	#f5dcb3;
	border:		1px solid black;
    }
    UL.doctools_requirements LI, UL.doctools_syntax LI {
	list-style: 	none;
	margin-left: 	0em;
	text-indent:	0em;
	padding:	0em;
    }
    DIV.doctools_synopsis {
	color: 		black;
	background: 	#80ffff;
	border:		1px solid black;
	font-family:	serif;
	margin-top: 	1em;
	margin-bottom: 	1em;
    }
    UL.doctools_syntax {
	margin-top: 	1em;
	border-top:	1px solid black;
    }
    UL.doctools_requirements {
	margin-bottom: 	1em;
	border-bottom:	1px solid black;
    }
--></style>
</head>
<! -- Generated from file 'config.man' by tcllib/doctools with format 'html'
   -->
<! -- Copyright &copy; 2015 - 2017 by G. Andrew Mangogna
   -->
<! -- micca-DSL.n
   -->
<body><hr> [
   <a href="../toc.html">Table Of Contents</a>
| <a href="../index.html">Keyword Index</a>
 ] <hr>
<div class="doctools">
<h1 class="doctools_title">micca-DSL(n) 1.0b3 micca &quot;Micca Configuration DSL&quot;</h1>
<div id="name" class="doctools_section"><h2><a name="name">Name</a></h2>
<p>micca-DSL - Commands for Defining a Domain</p>
</div>
<div id="toc" class="doctools_section"><h2><a name="toc">Table Of Contents</a></h2>
<ul class="doctools_toc">
<li class="doctools_section"><a href="#toc">Table Of Contents</a></li>
<li class="doctools_section"><a href="#synopsis">Synopsis</a></li>
<li class="doctools_section"><a href="#section1">Description</a></li>
<li class="doctools_section"><a href="#section2">Commands</a></li>
<li class="doctools_section"><a href="#section3">Domain Commands</a></li>
<li class="doctools_section"><a href="#section4">Class Commands</a></li>
<li class="doctools_section"><a href="#section5">State Model Commands</a></li>
<li class="doctools_section"><a href="#section6">Assigner Commands</a></li>
<li class="doctools_section"><a href="#section7">Population Commands</a></li>
<li class="doctools_section"><a href="#section8">Class Population Commands</a></li>
<li class="doctools_section"><a href="#section9">Assigner Population Commands</a></li>
<li class="doctools_section"><a href="#see-also">See Also</a></li>
<li class="doctools_section"><a href="#keywords">Keywords</a></li>
<li class="doctools_section"><a href="#copyright">Copyright</a></li>
</ul>
</div>
<div id="synopsis" class="doctools_section"><h2><a name="synopsis">Synopsis</a></h2>
<div class="doctools_synopsis">
<ul class="doctools_syntax">
<li><a href="#1"><b class="cmd">domain</b> <i class="arg">name</i> <i class="arg">script</i></a></li>
<li><a href="#2"><b class="cmd">population</b> <i class="arg">domain</i> <i class="arg">script</i></a></li>
<li><a href="#3"><b class="cmd">class</b> <i class="arg">classname</i> <span class="opt">?<i class="arg">script</i>?</span></a></li>
<li><a href="#4"><b class="cmd">association</b> <i class="arg">name</i> <i class="arg"><span class="opt">?-associator class?</span></i> <i class="arg"><span class="opt">?-multiple?</span></i> <i class="arg"><span class="opt">?-static | -dynamic?</span></i> <i class="arg"><span class="opt">?--?</span></i> <i class="arg">source</i> <i class="arg">spec</i> <i class="arg">target</i> <i class="arg"><span class="opt">?script?</span></i></a></li>
<li><a href="#5"><b class="cmd">generalization</b> <i class="arg">name</i> <i class="arg"><span class="opt">?-union | -reference?</span></i> <i class="arg">super</i> <i class="arg">sub1</i> <i class="arg">sub2</i> <i class="arg"><span class="opt">?...?</span></i></a></li>
<li><a href="#6"><b class="cmd">domainop</b> <i class="arg">rettype</i> <i class="arg">name</i> <i class="arg">parameters</i> <i class="arg">body</i> <i class="arg"><span class="opt">?comment?</span></i></a></li>
<li><a href="#7"><b class="cmd">externalop</b> <i class="arg">rettype</i> <i class="arg">name</i> <i class="arg">parameters</i> <i class="arg">body</i> <i class="arg"><span class="opt">?comment?</span></i></a></li>
<li><a href="#8"><b class="cmd">typealias</b> <i class="arg">name</i> <i class="arg">definition</i></a></li>
<li><a href="#9"><b class="cmd">interface</b> <i class="arg">text</i></a></li>
<li><a href="#10"><b class="cmd">prologue</b> <i class="arg">text</i></a></li>
<li><a href="#11"><b class="cmd">epilogue</b> <i class="arg">text</i></a></li>
<li><a href="#12"><b class="cmd">attribute</b> <i class="arg">name</i> <i class="arg">type</i> <i class="arg"><span class="opt">?-default value?</span></i> <i class="arg"><span class="opt">?-dependent formula?</span></i></a></li>
<li><a href="#13"><b class="cmd">classop</b> <i class="arg">rettype</i> <i class="arg">name</i> <i class="arg">parameters</i> <i class="arg">body</i></a></li>
<li><a href="#14"><b class="cmd">instop</b> <i class="arg">rettype</i> <i class="arg">name</i> <i class="arg">parameters</i> <i class="arg">body</i></a></li>
<li><a href="#15"><b class="cmd">classop</b> <i class="arg">rettype</i> <i class="arg">name</i> <i class="arg">parameters</i> <i class="arg">body</i></a></li>
<li><a href="#16"><b class="cmd">statemodel</b> <i class="arg">body</i></a></li>
<li><a href="#17"><b class="cmd">polymorphic</b> <i class="arg">event</i> <i class="arg"><span class="opt">?argname argtype ...?</span></i></a></li>
<li><a href="#18"><b class="cmd">constructor</b> <i class="arg">body</i></a></li>
<li><a href="#19"><b class="cmd">destructor</b> <i class="arg">body</i></a></li>
<li><a href="#20"><b class="cmd">state</b> <i class="arg">name</i> <i class="arg">parameters</i> <i class="arg">body</i></a></li>
<li><a href="#21"><b class="cmd">transition</b> <i class="arg">currstate</i> - <i class="arg">event</i> -&gt; <i class="arg">newstate</i></a></li>
<li><a href="#22"><b class="cmd">event</b> <i class="arg">name</i> <i class="arg"><span class="opt">?argname argtype ...?</span></i></a></li>
<li><a href="#23"><b class="cmd">initialstate</b> <i class="arg">state</i></a></li>
<li><a href="#24"><b class="cmd">defaulttrans</b> <i class="arg">transition</i></a></li>
<li><a href="#25"><b class="cmd">final</b> <i class="arg"><span class="opt">?state ...?</span></i></a></li>
<li><a href="#26"><b class="cmd">statemodel</b> <i class="arg">body</i></a></li>
<li><a href="#27"><b class="cmd">identifyby</b> <i class="arg">class</i></a></li>
<li><a href="#28"><b class="cmd">class</b> <i class="arg">name</i> <i class="arg">script</i></a></li>
<li><a href="#29"><b class="cmd">assigner</b> <i class="arg">association</i> <i class="arg">script</i></a></li>
<li><a href="#30"><b class="cmd">instance</b> <i class="arg">name</i> <i class="arg">comp1</i> <i class="arg">values1</i> <i class="arg"><span class="opt">?...?</span></i></a></li>
<li><a href="#31"><b class="cmd">table</b> <i class="arg">heading</i> <i class="arg">name1</i> <i class="arg">values1</i> <i class="arg"><span class="opt">?...?</span></i></a></li>
<li><a href="#32"><b class="cmd">allocate</b> <i class="arg">size</i></a></li>
<li><a href="#33"><b class="cmd">instance</b> <i class="arg">name</i> <i class="arg">idinstance</i></a></li>
</ul>
</div>
</div>
<div id="section1" class="doctools_section"><h2><a name="section1">Description</a></h2>
<p>This manpage describes the <b class="cmd"><a href="micca.html">micca</a></b> DSL.
When translating an executable model using <b class="cmd"><a href="micca.html">micca</a></b>,
the model is transcoded into the DSL described in this manual.
The DSL is implemented as an internal DSL
in Tcl and the script follows Tcl syntax rules.</p>
</div>
<div id="section2" class="doctools_section"><h2><a name="section2">Commands</a></h2>
<p>At the highest level,
the commands in this section allow you to define the characteristics
of a domain and its initial instance population.</p>
<dl class="doctools_definitions">
<dt><a name="1"><b class="cmd">domain</b> <i class="arg">name</i> <i class="arg">script</i></a></dt>
<dd><p>The <b class="cmd">domain</b> command defines a domain named, <i class="arg">name</i>, and evaluates
<i class="arg">script</i> in a context where commands in <i class="arg">script</i> may be used to define
the characteristics of a domain.
The <i class="arg">script</i> argument should contain invocations of the
<span class="sectref"><a href="#section3">domain commands</a></span>
described below.</p>
<pre class="doctools_example">
domain wmctrl {
    # A script containing domain commands to define the domain.
    ...
}
</pre>
</dd>
<dt><a name="2"><b class="cmd">population</b> <i class="arg">domain</i> <i class="arg">script</i></a></dt>
<dd><p>The <b class="cmd">population</b> command is used to define the initial instance
population for the domain named, <i class="arg">domain</i>.
The <i class="arg">script</i> argument should contain commands
that define the attribute values, relationship linkages and
storage allocations for <i class="arg">domain</i>.
It is evaluated in a context where the
<span class="sectref"><a href="#section7">population commands</a></span>
described below are available.</p>
<pre class="doctools_example">
population wmctrl {
    # A script containing populations commands to define the initial
    # instance population and storage allocation for the domain.
    ...
}
</pre>
</dd>
</dl>
</div>
<div id="section3" class="doctools_section"><h2><a name="section3">Domain Commands</a></h2>
<p>The commands in this section are used to define the characteristics
of a domain using the <b class="cmd"><a href="micca.html">micca</a></b> DSL.
These are the commands that are available when the <i class="arg">script</i>
argument of the <b class="cmd">domain</b> is evaluated.</p>
<dl class="doctools_definitions">
<dt><a name="3"><b class="cmd">class</b> <i class="arg">classname</i> <span class="opt">?<i class="arg">script</i>?</span></a></dt>
<dd><p>The <b class="cmd">class</b> command defines a class named, <i class="arg">classname</i>.
The <i class="arg">script</i> argument is optional and if provided is
a script that is evaluated in a context where
<span class="sectref"><a href="#section4">class commands</a></span>
are available to define the characteristics of the class.
The <b class="cmd">class</b> command may invoked multiple times for the same
<i class="arg">classname</i> and the class definition is cumulative.</p>
<pre class="doctools_example">
class Pump {
    # Commands that define the characteristics of the Pump class.
    ...
}
</pre>
</dd>
<dt><a name="4"><b class="cmd">association</b> <i class="arg">name</i> <i class="arg"><span class="opt">?-associator class?</span></i> <i class="arg"><span class="opt">?-multiple?</span></i> <i class="arg"><span class="opt">?-static | -dynamic?</span></i> <i class="arg"><span class="opt">?--?</span></i> <i class="arg">source</i> <i class="arg">spec</i> <i class="arg">target</i> <i class="arg"><span class="opt">?script?</span></i></a></dt>
<dd><p>The <b class="cmd">association</b> command defines an association relationship
called, <i class="arg">name</i>,
between a <i class="arg">source</i> class and <i class="arg">target</i> class.
Traditionally,
association names follow a naming convention of a capital R followed
by a number (<em>e.g.</em> R27),
but any non-empty string <em>not</em> starting with a tilde character (~)
is allowed.
The forward direction of navigating the relationship is from <i class="arg">source</i>
to <i class="arg">target</i>.
For simple associations (<em>i.e.</em> those not involving a associator
class),
the <i class="arg">source</i> class serves as the refering class
(<em>i.e.</em> it contains the referential attributes formalizing
the association)
and the <i class="arg">target</i> class serves as the referenced class
(<em>i.e.</em> it contains the identifier to which the referential
attributes of the <i class="arg">source</i> class refer).
The conditionality and multiplicity of the association is given by the
<i class="arg">spec</i> argument.
The <i class="arg">spec</i> argument must take one of the following forms:</p>
<dl class="doctools_options">
<dt><b class="option">1--1</b></dt>
<dd><p>The association is <em>one</em> to <em>one</em>.</p></dd>
<dt><b class="option">0..1--1</b></dt>
<dd></dd>
<dt><b class="option">?--1</b></dt>
<dd><p>The association is <em>at most one</em> to <em>one</em>.</p></dd>
<dt><b class="option">0..1--0..1</b></dt>
<dd></dd>
<dt><b class="option">?--?</b></dt>
<dd><p>The association is <em>at most one</em> to <em>at most one</em>.</p></dd>
<dt><b class="option">1..*--1</b></dt>
<dd></dd>
<dt><b class="option">+--1</b></dt>
<dd><p>The association is <em>one or more</em> to <em>one</em>.</p></dd>
<dt><b class="option">0..*--1</b></dt>
<dd></dd>
<dt><b class="option">*--1</b></dt>
<dd><p>The association is <em>zero or more</em> to <em>one</em>.</p></dd>
<dt><b class="option">1..*--0..1</b></dt>
<dd></dd>
<dt><b class="option">+--?</b></dt>
<dd><p>The association is <em>one or more</em> to <em>at most one</em>.</p></dd>
<dt><b class="option">0..*--0..1</b></dt>
<dd></dd>
<dt><b class="option">*--?</b></dt>
<dd><p>The association is <em>zero or more</em> to <em>at most one</em>.</p></dd>
<dt><b class="option">1..*--1..*</b></dt>
<dd></dd>
<dt><b class="option">+--+</b></dt>
<dd><p>The association is <em>one or more</em> to <em>one or more</em>.</p></dd>
<dt><b class="option">0..*--1..*</b></dt>
<dd></dd>
<dt><b class="option">*--+</b></dt>
<dd><p>The association is <em>zero or more</em> to <em>one or more</em>.</p></dd>
<dt><b class="option">1..*--0..*</b></dt>
<dd></dd>
<dt><b class="option">+--*</b></dt>
<dd><p>The association is <em>one or more</em> to <em>zero or more</em>.</p></dd>
<dt><b class="option">0..*--0..*</b></dt>
<dd></dd>
<dt><b class="option">*--*</b></dt>
<dd><p>The association is <em>zero or more</em> to <em>zero or more</em>.</p></dd>
</dl>
<p>A class based association is indicated by the <i class="arg">-associator</i> argument
with <i class="arg">class</i> being defined as the associator class.
Note that <b class="cmd"><a href="micca.html">micca</a></b> will insist that any association whose
multiplicity and conditionality on the <i class="arg">target</i> class side
is <b class="variable">0..1</b> or where both sides have a multiplicity greater than one
be formalized using an associator class.
This is the same as disallowing any of a <em>NULL</em> value for
a referential attribute and insisting the instances of the
association track the instances of the associator class.
For class bases associations, the <i class="arg">-multiple</i> argument may be present
to indicate that multiple instances of the associator class may reference
the same instances of the participating classes.
This option is only allowed for class bases associations and is used
to define many-to-many-to-many relationships.
If the <i class="arg">-static</i> argument is given then the association is
defined to be static and the number of instances of the association 
itself cannot vary during the run time of the domain.
If the <i class="arg">-dynamic</i> argument is given or neither <i class="arg">-static</i>
or <i class="arg">-dynamic</i> is given,
then the instances of the association are assumed to vary during the
run time of the domain.
These options allow <b class="cmd"><a href="micca.html">micca</a></b> to choose the appropriate data structures
for relationship storage given the run time behavior of the relationship.
The association command may have an optional <i class="arg">script</i> argument.
If <i class="arg">script</i> is present,
then the association is defined to have an assigner and
<i class="arg">script</i> is evaluated to define the characteristics of the assigner.
The <i class="arg">script</i> is evaluated in a context where
<span class="sectref"><a href="#section6">assigner commands</a></span>
are available to define the characteristics of the association assigner.</p>
<pre class="doctools_example">
association R13 -static WashingMachine 1--1 Tub
association R22 -associator Ownership Dog 1..*--0..* Owner
association R2 -associator Service Clerk 0..1--0..1 Client {
    statemodel {
        # State model for assigning clerks to clients.
    }
}
</pre>
</dd>
<dt><a name="5"><b class="cmd">generalization</b> <i class="arg">name</i> <i class="arg"><span class="opt">?-union | -reference?</span></i> <i class="arg">super</i> <i class="arg">sub1</i> <i class="arg">sub2</i> <i class="arg"><span class="opt">?...?</span></i></a></dt>
<dd><p>The <b class="cmd">generalization</b> command defines a generalization relationship
called, <i class="arg">name</i>.
Traditionally,
generalization names follow a naming convention of a capital R followed
by a number (<em>e.g.</em> R27),
but any non-empty string <em>not</em> starting with a tilde character (~)
is allowed.
The <i class="arg">super</i> is the name of a class that will serve as the superclass
in the generalization.
The <i class="arg">subN</i> arguments give the names of the subclasses of the
generalization.
At least two subclasses must be given.
If the <i class="arg">-union</i> argument is given,
then subclasses will be stored in a union within the structure of the
superclass.
If the <i class="arg">-reference</i> argument is given or if neither <i class="arg">-union</i>
nor <i class="arg">-reference</i> is present,
the subclasses are stored separate from the superclass and instance
references are used to implement the generalization relationship.</p>
<pre class="doctools_example">
generalization R12 Lamp TableLamp FloorLamp
generalization R32 -union Washer FrontLoader TopLoader
</pre>
</dd>
<dt><a name="6"><b class="cmd">domainop</b> <i class="arg">rettype</i> <i class="arg">name</i> <i class="arg">parameters</i> <i class="arg">body</i> <i class="arg"><span class="opt">?comment?</span></i></a></dt>
<dd><p>The <b class="cmd">domainop</b> command defines a domain operation called, <i class="arg">name</i>.
A domain operation is translated to a &quot;C&quot; function of external scope.
The &quot;C&quot; return type of the function is given by the <i class="arg">rettype</i> argument.
Formal parameters to the operation are given as a list
of parameter name / parameter type pairs in the <i class="arg">parameters</i> argument.
The code for the domain operation is supplied in the <i class="arg">body</i>
argument.
If present, the optional <i class="arg">comment</i> argument text is inserted as
a comment in the generated header file for the domain just before the
external declaration of the domain operation function.
This provides a convenient way to provide addition information to users
of the domain operation in the generated header file.</p>
<pre class="doctools_example">
domainop void startWasher {washerID MRT_InstId when MRT_DelayTime} {
    // C Code to start a washing machine.
} {
Use this operation to start a washing machine.
}
</pre>
</dd>
<dt><a name="7"><b class="cmd">externalop</b> <i class="arg">rettype</i> <i class="arg">name</i> <i class="arg">parameters</i> <i class="arg">body</i> <i class="arg"><span class="opt">?comment?</span></i></a></dt>
<dd><p>The <b class="cmd">externalop</b> command defines an external operation called,
<i class="arg">name</i>, which
the domain assumes will be supplied out side of the domain definition.
An external operation is translated into an exteral function reference.
The &quot;C&quot; return type of the function is given by the <i class="arg">rettype</i> argument.
Formal parameters to the operation are given as a list
of parameter name / parameter type pairs in the <i class="arg">parameters</i> argument.
&quot;C&quot; code may be supplied as the <i class="arg">body</i> argument.
By default, the code is <em>not</em> placed in the output,
but to aid in testing and simulation,
the <b class="cmd"><a href="micca.html">micca</a></b> translator has an option to include the code in the
translated output.
If present, the optional <i class="arg">comment</i> argument text is inserted as
a comment in the generated header file for the domain just before the
external declaration of the external operation function.</p>
<pre class="doctools_example">
externalop {char const *} MSG_Get_message {lang {char const *}} {} {
Get a message from the MSG external entity.
}
</pre>
</dd>
<dt><a name="8"><b class="cmd">typealias</b> <i class="arg">name</i> <i class="arg">definition</i></a></dt>
<dd><p>The <b class="cmd">typealias</b> command defines a new data type name, <i class="arg">name</i>,
and equates it to the &quot;C&quot; type defintion given by <i class="arg">definition</i>.</p>
<pre class="doctools_example">
typealias Direction_t enum {
    Up, Down
}
</pre>
</dd>
<dt><a name="9"><b class="cmd">interface</b> <i class="arg">text</i></a></dt>
<dd><p>The <b class="cmd"><a href="micca.html">micca</a></b> code generator produces a header file for the domain.
The <b class="cmd">interface</b> command will insert <i class="arg">text</i> near the beginning
of the generated header file.
The <b class="cmd">interface</b> command may be invoked multiple times,
and the text is concatenated in the order the commands are encountered.
This command is typically used for declarations and include
files needed by other code in the domain.</p>
<pre class="doctools_example">
interface {
    #include &quot;myheader.h&quot;
}
</pre>
</dd>
<dt><a name="10"><b class="cmd">prologue</b> <i class="arg">text</i></a></dt>
<dd><p>The <b class="cmd"><a href="micca.html">micca</a></b> code generator produces a code file for the domain.
The <b class="cmd">prologue</b> command will insert <i class="arg">text</i> near the beginning
of the generated code file.
The <b class="cmd">prologue</b> command may be invoked multiple times,
and the text is concatenated in the order the commands are encountered.
This command is typically used for declarations and include
files needed by code in the domain.</p>
<pre class="doctools_example">
prologue {
    struct Point {
        int x ;
        int y ;
    } ;
    static void scalarMultiple(int, struct Point *) ;
}
</pre>
</dd>
<dt><a name="11"><b class="cmd">epilogue</b> <i class="arg">text</i></a></dt>
<dd><p>The <b class="cmd"><a href="micca.html">micca</a></b> code generator produces a code file for the domain.
The <b class="cmd">epilogue</b> command will insert <i class="arg">text</i> near the end
of the generated code file.
The <b class="cmd">epilogue</b> command may be invoked multiple times,
and the text is concatenated in the order the commands are encountered.
This command is typically used for local definitions
needed by code in the domain.</p>
<pre class="doctools_example">
epilogue {
    static void
    scalarMultiple(
        int a,
        struct Point *p)
    {
        p-&gt;x *= a ;
        p-&gt;y *= a ;
        return ;
    }
}
</pre>
</dd>
</dl>
</div>
<div id="section4" class="doctools_section"><h2><a name="section4">Class Commands</a></h2>
<p>The commands in this section may appear in the <i class="arg">script</i>
argument of the <b class="cmd">class</b> command to define the properties
of a class.</p>
<dl class="doctools_definitions">
<dt><a name="12"><b class="cmd">attribute</b> <i class="arg">name</i> <i class="arg">type</i> <i class="arg"><span class="opt">?-default value?</span></i> <i class="arg"><span class="opt">?-dependent formula?</span></i></a></dt>
<dd><p>The <b class="cmd">attribute</b> command defines <i class="arg">name</i> to be an attribute of the
enclosing class.
The attribute has a data type of <i class="arg">type</i>.
<i class="arg">Name</i> must be a valid &quot;C&quot; identifier and <i class="arg">type</i> must be
a valid &quot;C&quot; type name or a type name given by the <b class="cmd">typealias</b> command.
A default value for the attribute may optionally be specified using
the <b class="option">-default</b> option.
Default values are used in any context where the an instance of the
class is created and no value for the attribute is given in the
creation invocation.
The <i class="arg">value</i> of a default value must be a valid &quot;C&quot; initializer and
is passed directly to the generated code.
By special dispensation,
attributes of type <em>array of character</em>
(<em>e.g.</em> char[16]) are treated
as NUL terminated strings in the usual &quot;C&quot; conventions.
If the <b class="option">-dependent</b> arguments is present,
the <i class="arg">name</i> attribute is defined as a mathematically dependent
attribute.
These types of attributes may only be read
and when they are read,
the value of the attribute is that returned by the <i class="arg">formula</i>.
The <i class="arg">formula</i> value should consist of &quot;C&quot; code to compute the
value of the attribute.
When invoked, <i class="arg">formula</i> is supplied with a value of <b class="variable">self</b>
for the class instance, a pointer to a location where the
attribute value is to be written and the number of bytes
memory for the result.
The variable name of the pointer is the same as the name of the attribute
and it is a pointer to the same type as the attribute.
The variable name of the memory size is <b class="variable">size</b>.</p>
<pre class="doctools_example">
class Washer {
    attribute ModelName {char[20]} ; # This is a NUL terminated string
    attribute Capacity unsigned -default 4
}
class Extent {
    attribute Height int
    attribute Width int
    attribute Area int -dependent {
        *Area = self-&gt;Height * self-&gt;Width ;
    }
}
class Name {
    attribute FirstName {char[32]} ;
    attribute LastName {char[32]} ;
    attribute FullName {char[64]} -dependent {
        size_t firstLen = strlen(self-&gt;FirstName) ;
        size_t lastLen = strlen(self-&gt;LastName) ;
        *FullName = '\0' ;
        if (size &gt;= firstLen + lastLen + 2) {
            strcat(FullName, self-&gt;FirstName)
            strcat(FullName, &quot; &quot;) ;
            strcat(FullName, self-&gt;LastName) ;
        }
    }
}
</pre>
</dd>
<dt><a name="13"><b class="cmd">classop</b> <i class="arg">rettype</i> <i class="arg">name</i> <i class="arg">parameters</i> <i class="arg">body</i></a></dt>
<dd><p>The <b class="cmd">classop</b> command defines a class based operation of the
enclosing class.
The name of the operation is given by the <i class="arg">name</i> argument and its
&quot;C&quot; return type is <i class="arg">rettype</i>.
Formal parameters to the operation are given as a list
of parameter name / parameter type pairs in the <i class="arg">parameters</i> argument.
The code for the operation is supplied in the <i class="arg">body</i> argument.</p>
<pre class="doctools_example">
classop {struct Washer *} findById {washerID MRT_InstId} {
    // Code to find a specific washer instance.
}
</pre>
</dd>
<dt><a name="14"><b class="cmd">instop</b> <i class="arg">rettype</i> <i class="arg">name</i> <i class="arg">parameters</i> <i class="arg">body</i></a></dt>
<dd><p>The <b class="cmd">instop</b> command defines an instance based operation of the
enclosing class.
The name of the operation is given by the <i class="arg">name</i> argument and its
&quot;C&quot; return type is <i class="arg">rettype</i>.
Formal parameters to the operation are given as a list
of parameter name / parameter type pairs in the <i class="arg">parameters</i> argument.
The code for the operation is supplied in the <i class="arg">body</i> argument.
Instance operations have an implied parameter of <b class="variable">self</b>,
which is supplied automatically to the operation upon invocation.</p>
<pre class="doctools_example">
instop unsigned incrCapacity {howmuch unsigned} {
    return self-&gt;Capacity += howmuch ;
}
</pre>
</dd>
<dt><a name="15"><b class="cmd">classop</b> <i class="arg">rettype</i> <i class="arg">name</i> <i class="arg">parameters</i> <i class="arg">body</i></a></dt>
<dd><p>The <b class="cmd">classop</b> command defines a class based operation of the
enclosing class.
The name of the operation is given by the <i class="arg">name</i> argument and its
&quot;C&quot; return type is <i class="arg">rettype</i>.
Formal parameters to the operation are given as a list
of parameter name / parameter type pairs in the <i class="arg">parameters</i> argument.
The code for the operation is supplied in the <i class="arg">body</i> argument.
Class operations do <em>not</em> have an implied parameter of <b class="variable">self</b>.
Class operation typically do not arise as part of a domain model
and are most useful when implementing particular search or summarizing
code on the class as a whole.</p></dd>
<dt><a name="16"><b class="cmd">statemodel</b> <i class="arg">body</i></a></dt>
<dd><p>The <b class="cmd">statemodel</b> command defines the states, events and transitions
of a state model which is associated with the enclosing class.
The <i class="arg">body</i> argument should contain invocations of
<span class="sectref"><a href="#section5">state model commands</a></span>
to define the properties of the class state model.</p>
<pre class="doctools_example">
statemodel {
    # Commands to define the states, events and transitions of
    # the class state model.
}
</pre>
</dd>
<dt><a name="17"><b class="cmd">polymorphic</b> <i class="arg">event</i> <i class="arg"><span class="opt">?argname argtype ...?</span></i></a></dt>
<dd><p>The <b class="cmd">polymorphic</b> command defines a polymorphic event named,
<i class="arg">event</i> which has optional parameters given by
<span class="opt">?argnameN argtypeN?</span> pairs.
A polymorphic event may only be defined on a class that serves as a
superclass in a generalization relationship.
If <i class="arg">event</i> requires any parameters they must be given in this command.
Polymorphic events are inherited across all generalizations in which
the enclosing class is a superclass.</p>
<pre class="doctools_example">
polymorphic Run howfast int howlong int
polymorphic Stop
</pre>
</dd>
<dt><a name="18"><b class="cmd">constructor</b> <i class="arg">body</i></a></dt>
<dd><p>The <b class="cmd">constructor</b> command defines a constructor for the enclosing class.
The <i class="arg">body</i> argument consists of &quot;C&quot; code which is run
whenever a class is created during run time.
The constructor is supplied automatically with a value for the <b class="variable">self</b>
variable.
Typically, constructors are used to initialize complex user defined
data types associated with attributes.</p></dd>
<dt><a name="19"><b class="cmd">destructor</b> <i class="arg">body</i></a></dt>
<dd><p>The <b class="cmd">destructor</b> command defines a destructor for the enclosing class.
The <i class="arg">body</i> argument consists of &quot;C&quot; code which is run
whenever a class is deleted during run time.
The destructor is supplied automatically with a value for the <b class="variable">self</b>
variable.
Typically, destructors are used to clean up complex user defined
data types associated with attributes.</p></dd>
</dl>
</div>
<div id="section5" class="doctools_section"><h2><a name="section5">State Model Commands</a></h2>
<p>The commands in this section are used to define the state model
for a class.</p>
<dl class="doctools_definitions">
<dt><a name="20"><b class="cmd">state</b> <i class="arg">name</i> <i class="arg">parameters</i> <i class="arg">body</i></a></dt>
<dd><p>The <b class="cmd">state</b> command defines a new state called, <i class="arg">name</i>.
If the state accepts parameters, they are given in the
<i class="arg">parameters</i> argument as a list of parameter name / parameter type
pairs.
If the state does not accept parameters, the empty list ( {} ) should
be given.
Upon entry into the state,
the &quot;C&quot; code given in the <i class="arg">body</i> argument is executed.
The <i class="arg">body</i> will have a pre-defined variable named, <b class="variable">self</b>,
which is a reference to the class instance for which the state
transition happened.</p>
<p>The <i class="arg">body</i> should contain &quot;C&quot; code and <b class="cmd"><a href="micca.html">micca</a></b> embedded
macro commands.
The embedded commands provide a convenient interface for performing
model level actions such as signaling events.
See the <b class="cmd">micca-embedded</b> manual page for a description of
the available embedded commands.</p>
<pre class="doctools_example">
state Running {} {
    &lt;%my findOneRelated car R3 R7%&gt;
    if (car != NULL) {
        &lt;%instance car signal Started%&gt;
    }
}
state Activate {count int} {
    &lt;%my update Number count%&gt;
    &lt;%my signal Run%&gt;
}
</pre>
</dd>
<dt><a name="21"><b class="cmd">transition</b> <i class="arg">currstate</i> - <i class="arg">event</i> -&gt; <i class="arg">newstate</i></a></dt>
<dd><p>The <b class="cmd">transition</b> command defines a state model transition
from <i class="arg">currstate</i> to <i class="arg">newstate</i> when <i class="arg">event</i> is received.
The <i class="arg">currstate</i> argument may be the name of any state in the
state model (that state need not have been defined yet) or the
pseudo-initial state &quot;@&quot;.
If <i class="arg">currstate</i> is given as &quot;@&quot;, the <i class="arg">event</i> is a creation event.
The <i class="arg">newstate</i> argument may be the name of any state or the
special non-transitioning states of &quot;IG&quot; (ignore),
which causes <i class="arg">event</i> to be ignored or &quot;CH&quot; (can't happen),
which results in a system error if <i class="arg">event</i> is received.
The &quot;-&quot; and &quot;-&gt;&quot; arguments are syntactic sugar and are ignored.</p>
<pre class="doctools_example">
transition Running - Stop -&gt; Stopped
transition Stopped - Run -&gt; Running
</pre>
</dd>
<dt><a name="22"><b class="cmd">event</b> <i class="arg">name</i> <i class="arg"><span class="opt">?argname argtype ...?</span></i></a></dt>
<dd><p>The <b class="cmd">event</b> command defines an event named, <i class="arg">name</i>, with
optional parameters given by the <i class="arg">argnameN argtypeN</i> pairs.
It is not required to define events.
The names and parameter signatures will be deduced from their
usage in transition statements.
However, in some cases, particularly those where the event carrys
parameters, it may be more convenient to define the event and its
signature rather than relying on assuming a signature by virtue
of the event causing a transition into a particular state.</p>
<pre class="doctools_example">
event Run speed int
state Running {fast int} {
}
transition Stopped - Run -&gt; Running
</pre>
<p>In this example, the <b class="variable">Run</b> event and the <b class="variable">Running</b> state
have the same parameter signature, despite the difference in
naming of the parameter itself.</p></dd>
<dt><a name="23"><b class="cmd">initialstate</b> <i class="arg">state</i></a></dt>
<dd><p>The <b class="cmd">initialstate</b> command defines <i class="arg">state</i> to be the default
initial state for the state model.
Instances may be created in any state, but by default they are created
in <i class="arg">state</i>.
If the <b class="cmd">initialstate</b> command does not appear in the state model
definition, then the default initial state is taken to be the lexically first
state defined in the state model.</p></dd>
<dt><a name="24"><b class="cmd">defaulttrans</b> <i class="arg">transition</i></a></dt>
<dd><p>The <b class="cmd">defaulttrans</b> command defines <i class="arg">transition</i> to be the
default transition.
The default transition is used for all transitions not explicitly
mentioned in a <b class="cmd">transition</b> command.
The <i class="arg">transition</i> argument must be either <b class="variable">IG</b> or <b class="variable">CH</b>.
If no <b class="cmd">defaulttrans</b> command is given in the state model definition,
the default transition is assumed to be <b class="variable">CH</b>.</p></dd>
<dt><a name="25"><b class="cmd">final</b> <i class="arg"><span class="opt">?state ...?</span></i></a></dt>
<dd><p>The <b class="cmd">final</b> command defines the <i class="arg">states</i> as final states.
An instance that enters a final state is automatically deleted
after its state activity is run.
The <b class="cmd">final</b> may appear multiple times in the state model definition.</p></dd>
</dl>
</div>
<div id="section6" class="doctools_section"><h2><a name="section6">Assigner Commands</a></h2>
<p>Assigner Command can appear in the <i class="arg">script</i> argument of the
<b class="cmd">association</b> command and are used to define the properties
of the association assigner.</p>
<dl class="doctools_definitions">
<dt><a name="26"><b class="cmd">statemodel</b> <i class="arg">body</i></a></dt>
<dd><p>The <b class="cmd">statemodel</b> command defines the state model of an assigner.
All the commands defined for state models of classes can be used
to define the state model of an assigner.
An assigner must have a state model.</p></dd>
<dt><a name="27"><b class="cmd">identifyby</b> <i class="arg">class</i></a></dt>
<dd><p>The <b class="cmd">identifyby</b> command defines <i class="arg">class</i> as the partitioning
class for a multiple assigner.
Multiple assigners have the same number of instances as there are
instances of <i class="arg">class</i>.</p></dd>
</dl>
</div>
<div id="section7" class="doctools_section"><h2><a name="section7">Population Commands</a></h2>
<p>The population comands are used to define the intial instance population
for a domain.
Populations may be defined for classes and multiple assigners.
Single assigner populations are automatically instanciated by <b class="cmd"><a href="micca.html">micca</a></b>.
Base attribute values are specified as strings that are passed directly
as initializers into the output ``C'' code.
Referential values use the names of class instances to implement the
references.
Consider:</p>
<pre class="doctools_example">
domain FlightSchedule {
    class Passenger {
        attribute Name {char[32]}
    }
    class Flight {
        attribute FlightID {char[32]}
    }
    association R1 Passenger 0..*--1 Flight
}
</pre>
<p>The Passenger class is deemed to have an <b class="variable">R1</b> referential attribute
which must be given as the name of a Flight instance.</p>
<pre class="doctools_example">
population FightSchedule {
    class Passenger {
        instance Fred R1 f1
        instance Alice R1 f1
    }
    class Flight {
        instance f1 FlightID SWA172
    }
}
</pre>
<p>The ordering of the instance definitions is arbitrary. Above the
Passenger instances may be defined before the Flight instances to which
they are related are defined.
The same pattern is used when specifying the links between a subclass
instance and its related superclass instance.
For associator classes, there are two references, one for each
participant in the association.
In that case the value of the referential attribute is a list
consisting of two pairs, the class name and an instance name for
one participant and a class name and instance name for the other
participant.</p>
<pre class="doctools_example">
class Ownership {
    instance ow1 Acquired 2015 R23 {Owner fred Dog rover}
}
</pre>
<p>For reflexive associator classes, the class names of the participants are
the same and so we resort to the keywords <b class="option">forward</b> and
<b class="option">backward</b> to specify the references in the forward and backward
directions of the association, respectively.</p>
<pre class="doctools_example">
class Authorship {
    instance ath1 R16 {forward author2 backward author1}
}
</pre>
<dl class="doctools_definitions">
<dt><a name="28"><b class="cmd">class</b> <i class="arg">name</i> <i class="arg">script</i></a></dt>
<dd><p>The <b class="cmd">class</b> command (in a <b class="cmd">population</b> command script)
defines the population for a class named, <i class="arg">class</i>.
The <i class="arg">script</i> argument is a script that is evaluated in a context where
<span class="sectref"><a href="#section8">class population commands</a></span>
are available to define the initial population of class instances.</p></dd>
<dt><a name="29"><b class="cmd">assigner</b> <i class="arg">association</i> <i class="arg">script</i></a></dt>
<dd><p>The <b class="cmd">assigner</b> command defines the population the multiple
assigner for the association named, <i class="arg">association</i>.
The <i class="arg">script</i> argument is a script that is evaluated in a context where
<span class="sectref"><a href="#section9">assigner population commands</a></span>
are available to define the initial population of class instances.</p></dd>
</dl>
</div>
<div id="section8" class="doctools_section"><h2><a name="section8">Class Population Commands</a></h2>
<dl class="doctools_definitions">
<dt><a name="30"><b class="cmd">instance</b> <i class="arg">name</i> <i class="arg">comp1</i> <i class="arg">values1</i> <i class="arg"><span class="opt">?...?</span></i></a></dt>
<dd><p>The <b class="cmd">instance</b> command defines the attribute and relationship values 
for an instance of the enclosing class.
The instance is named, <i class="arg">name</i>, and this name may be used to refer
to the instance when supplying relationship linkage values.
Instance names must be unque within the class to which they pertain.
The attribute and relationship values are given in pairs by the
<i class="arg">compN</i> / <i class="arg">valueN</i> arguments.
Every component of the instance must either be specified in the
<b class="cmd">instance</b> command or have defined default values.
An attribute may be given its default value by specifying the value
of the attribute as a dash character ( - ).
If the value of an attribute need to be a dash character, then it
must be escaped with a backslash character ( \- )</p>
<pre class="doctools_example">
instance dog1 Name Rover Born 2010
</pre>
</dd>
<dt><a name="31"><b class="cmd">table</b> <i class="arg">heading</i> <i class="arg">name1</i> <i class="arg">values1</i> <i class="arg"><span class="opt">?...?</span></i></a></dt>
<dd><p>The <b class="cmd">table</b> command allows defining multiple class instance in
a more tabular layout.
The <i class="arg">heading</i> is a list of instance component names, i.e. attribute
names or relationship names.
Each instance is defined by a <i class="arg">name</i> and a list of <i class="arg">values</i>.
The <i class="arg">values</i> argument is a simple list of values and they are
used as initializers in the same order as the attributes are listed
in the <i class="arg">heading</i>.</p>
<pre class="doctools_example">
    table       {Name       Born}\ 
    dog2        {Jumper     2012}\ 
    dog3        {Fluffy     2015}
</pre>
</dd>
<dt><a name="32"><b class="cmd">allocate</b> <i class="arg">size</i></a></dt>
<dd><p>The <b class="cmd">allocation</b> command requests that <i class="arg">size</i> number of
<em>additional</em> storage slots be allocated for the class.
The maximum number of instances of the class is the sum of the
number of instances in the initial instance population plus <i class="arg">size</i>.</p></dd>
</dl>
</div>
<div id="section9" class="doctools_section"><h2><a name="section9">Assigner Population Commands</a></h2>
<dl class="doctools_definitions">
<dt><a name="33"><b class="cmd">instance</b> <i class="arg">name</i> <i class="arg">idinstance</i></a></dt>
<dd><p>The <b class="cmd">instance</b> command (in the context of an assigner population script)
defines a multiple assigner instance called, <i class="arg">name</i>, and set the
identifying instance of the assigner to <i class="arg">idinstance</i>.
The <i class="arg">idinstance</i> must be the name of a class instance from the
identifying class specified when the multiple assigner was defined
(see <b class="cmd">identifyby</b> command above).</p></dd>
</dl>
</div>
<div id="see-also" class="doctools_section"><h2><a name="see-also">See Also</a></h2>
<p><a href="micca.html">micca</a></p>
</div>
<div id="keywords" class="doctools_section"><h2><a name="keywords">Keywords</a></h2>
<p><a href="../index.html#key2">executable</a>, <a href="../index.html#key1">model</a></p>
</div>
<div id="copyright" class="doctools_section"><h2><a name="copyright">Copyright</a></h2>
<p>Copyright &copy; 2015 - 2017 by G. Andrew Mangogna</p>
</div>
</div></body></html>
