<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.26.3 (20100126.1600)
 -->
<!-- Title: wmachine Pages: 1 -->
<svg width="302pt" height="720pt"
 viewBox="0.00 0.00 301.71 720.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph1" class="graph" transform="scale(0.41049 0.41049) rotate(0) translate(4 1750)">
<title>wmachine</title>
<polygon fill="white" stroke="white" points="-4,5 -4,-1750 732,-1750 732,5 -4,5"/>
<!-- Idle -->
<g id="node1" class="node"><title>Idle</title>
<polygon fill="none" stroke="black" stroke-width="2" points="727,-1746 179,-1746 179,-1578 727,-1578 727,-1746"/>
<text text-anchor="start" x="187" y="-1729.4" font-family="Times Roman,serif" font-size="14.00">Idle {} {</text>
<text text-anchor="start" x="187" y="-1711.4" font-family="Times Roman,serif" font-size="14.00"> &#160;&#160;&#160;# Stop motor</text>
<text text-anchor="start" x="187" y="-1693.4" font-family="Times Roman,serif" font-size="14.00"> &#160;&#160;&#160;puts &quot;[self]: Stopping motor&quot;</text>
<text text-anchor="start" x="187" y="-1659.4" font-family="Times Roman,serif" font-size="14.00"> &#160;&#160;&#160;# For testing purpose, we want to be able to run the Tcl event loop and</text>
<text text-anchor="start" x="187" y="-1641.4" font-family="Times Roman,serif" font-size="14.00"> &#160;&#160;&#160;# when we are done with the cycle we will use &quot;vwait&quot; to determine that</text>
<text text-anchor="start" x="187" y="-1623.4" font-family="Times Roman,serif" font-size="14.00"> &#160;&#160;&#160;# we have finished.</text>
<text text-anchor="start" x="187" y="-1605.4" font-family="Times Roman,serif" font-size="14.00"> &#160;&#160;&#160;set ::wmachine([self]) Idle</text>
<text text-anchor="start" x="187" y="-1587.4" font-family="Times Roman,serif" font-size="14.00">}</text>
</g>
<!-- FillingForWashing -->
<g id="node2" class="node"><title>FillingForWashing</title>
<polygon fill="none" stroke="black" points="494,-1524 1.42109e-13,-1524 5.68434e-14,-1338 494,-1338 494,-1524"/>
<text text-anchor="start" x="8" y="-1507.4" font-family="Times Roman,serif" font-size="14.00">FillingForWashing {} {</text>
<text text-anchor="start" x="8" y="-1489.4" font-family="Times Roman,serif" font-size="14.00"> &#160;&#160;&#160;# Open water valve</text>
<text text-anchor="start" x="8" y="-1471.4" font-family="Times Roman,serif" font-size="14.00"> &#160;&#160;&#160;puts &quot;[self]: Opening water valve&quot;</text>
<text text-anchor="start" x="8" y="-1437.4" font-family="Times Roman,serif" font-size="14.00"> &#160;&#160;&#160;# At this point we need the washing tub sensor to tell us that the</text>
<text text-anchor="start" x="8" y="-1419.4" font-family="Times Roman,serif" font-size="14.00"> &#160;&#160;&#160;# tub is full. For simplicity, we will simulate the sensor by</text>
<text text-anchor="start" x="8" y="-1401.4" font-family="Times Roman,serif" font-size="14.00"> &#160;&#160;&#160;# signalling a delayed event to ourselves.</text>
<text text-anchor="start" x="8" y="-1383.4" font-family="Times Roman,serif" font-size="14.00"> &#160;&#160;&#160;# SIMULATING THE TUB SENSOR</text>
<text text-anchor="start" x="8" y="-1365.4" font-family="Times Roman,serif" font-size="14.00"> &#160;&#160;&#160;my delayedSignal 5000 Full</text>
<text text-anchor="start" x="8" y="-1347.4" font-family="Times Roman,serif" font-size="14.00">}</text>
</g>
<!-- Idle&#45;&gt;FillingForWashing -->
<g id="edge16" class="edge"><title>Idle&#45;&gt;FillingForWashing</title>
<path fill="none" stroke="black" d="M378.047,-1577.95C364.7,-1562.98 350.674,-1547.26 336.96,-1531.88"/>
<polygon fill="black" stroke="black" points="339.526,-1529.5 330.258,-1524.36 334.302,-1534.16 339.526,-1529.5"/>
<text text-anchor="middle" x="371" y="-1547.4" font-family="Times Roman,serif" font-size="14.00">Run</text>
</g>
<!-- Agitating -->
<g id="node3" class="node"><title>Agitating</title>
<polygon fill="none" stroke="black" points="480,-1284 100,-1284 100,-1114 480,-1114 480,-1284"/>
<text text-anchor="start" x="108" y="-1267.4" font-family="Times Roman,serif" font-size="14.00">Agitating {} {</text>
<text text-anchor="start" x="108" y="-1249.4" font-family="Times Roman,serif" font-size="14.00"> &#160;&#160;&#160;# Close water value</text>
<text text-anchor="start" x="108" y="-1231.4" font-family="Times Roman,serif" font-size="14.00"> &#160;&#160;&#160;puts &quot;[self]: Closing water valve&quot;</text>
<text text-anchor="start" x="108" y="-1213.4" font-family="Times Roman,serif" font-size="14.00"> &#160;&#160;&#160;# Set motor to agitate</text>
<text text-anchor="start" x="108" y="-1195.4" font-family="Times Roman,serif" font-size="14.00"> &#160;&#160;&#160;puts &quot;[self]: Setting motor to agitate&quot;</text>
<text text-anchor="start" x="108" y="-1177.4" font-family="Times Roman,serif" font-size="14.00"> &#160;&#160;&#160;# Signal &quot;Done&quot; to self delayed by the wash time.</text>
<text text-anchor="start" x="108" y="-1159.4" font-family="Times Roman,serif" font-size="14.00"> &#160;&#160;&#160;my variable wash</text>
<text text-anchor="start" x="108" y="-1141.4" font-family="Times Roman,serif" font-size="14.00"> &#160;&#160;&#160;my delayedSignal $wash Done</text>
<text text-anchor="start" x="108" y="-1123.4" font-family="Times Roman,serif" font-size="14.00">}</text>
</g>
<!-- FillingForWashing&#45;&gt;Agitating -->
<g id="edge4" class="edge"><title>FillingForWashing&#45;&gt;Agitating</title>
<path fill="none" stroke="black" d="M264.242,-1337.97C266.919,-1323.53 269.687,-1308.59 272.372,-1294.11"/>
<polygon fill="black" stroke="black" points="275.835,-1294.63 274.216,-1284.16 268.952,-1293.36 275.835,-1294.63"/>
<text text-anchor="middle" x="282" y="-1307.4" font-family="Times Roman,serif" font-size="14.00">Full</text>
</g>
<!-- EmptyingWashWater -->
<g id="node4" class="node"><title>EmptyingWashWater</title>
<polygon fill="none" stroke="black" points="437,-1060 169,-1060 169,-892 437,-892 437,-1060"/>
<text text-anchor="start" x="176.5" y="-1043.4" font-family="Times Roman,serif" font-size="14.00">EmptyingWashWater {} {</text>
<text text-anchor="start" x="176.5" y="-1025.4" font-family="Times Roman,serif" font-size="14.00"> &#160;&#160;&#160;# Stop motor</text>
<text text-anchor="start" x="176.5" y="-1007.4" font-family="Times Roman,serif" font-size="14.00"> &#160;&#160;&#160;puts &quot;[self]: Stopping motor&quot;</text>
<text text-anchor="start" x="176.5" y="-989.4" font-family="Times Roman,serif" font-size="14.00"> &#160;&#160;&#160;# Start pump</text>
<text text-anchor="start" x="176.5" y="-971.4" font-family="Times Roman,serif" font-size="14.00"> &#160;&#160;&#160;puts &quot;[self]: Starting pump&quot;</text>
<text text-anchor="start" x="176.5" y="-937.4" font-family="Times Roman,serif" font-size="14.00"> &#160;&#160;&#160;# SIMULATING THE TUB SENSOR</text>
<text text-anchor="start" x="176.5" y="-919.4" font-family="Times Roman,serif" font-size="14.00"> &#160;&#160;&#160;my delayedSignal 5000 Empty</text>
<text text-anchor="start" x="176.5" y="-901.4" font-family="Times Roman,serif" font-size="14.00">}</text>
</g>
<!-- Agitating&#45;&gt;EmptyingWashWater -->
<g id="edge2" class="edge"><title>Agitating&#45;&gt;EmptyingWashWater</title>
<path fill="none" stroke="black" d="M294.97,-1113.74C295.795,-1099.59 296.655,-1084.84 297.492,-1070.48"/>
<polygon fill="black" stroke="black" points="301.009,-1070.3 298.097,-1060.11 294.021,-1069.89 301.009,-1070.3"/>
<text text-anchor="middle" x="315.5" y="-1083.4" font-family="Times Roman,serif" font-size="14.00">Done</text>
</g>
<!-- FillingForRinse -->
<g id="node5" class="node"><title>FillingForRinse</title>
<polygon fill="none" stroke="black" points="446,-838 178,-838 178,-670 446,-670 446,-838"/>
<text text-anchor="start" x="185.5" y="-821.4" font-family="Times Roman,serif" font-size="14.00">FillingForRinse {} {</text>
<text text-anchor="start" x="185.5" y="-803.4" font-family="Times Roman,serif" font-size="14.00"> &#160;&#160;&#160;# Stop pump</text>
<text text-anchor="start" x="185.5" y="-785.4" font-family="Times Roman,serif" font-size="14.00"> &#160;&#160;&#160;puts &quot;[self]: Stopping pump&quot;</text>
<text text-anchor="start" x="185.5" y="-767.4" font-family="Times Roman,serif" font-size="14.00"> &#160;&#160;&#160;# Open water valve</text>
<text text-anchor="start" x="185.5" y="-749.4" font-family="Times Roman,serif" font-size="14.00"> &#160;&#160;&#160;puts &quot;[self]: Opening water valve&quot;</text>
<text text-anchor="start" x="185.5" y="-715.4" font-family="Times Roman,serif" font-size="14.00"> &#160;&#160;&#160;# SIMULATING THE TUB SENSOR</text>
<text text-anchor="start" x="185.5" y="-697.4" font-family="Times Roman,serif" font-size="14.00"> &#160;&#160;&#160;my delayedSignal 5000 Full</text>
<text text-anchor="start" x="185.5" y="-679.4" font-family="Times Roman,serif" font-size="14.00">}</text>
</g>
<!-- EmptyingWashWater&#45;&gt;FillingForRinse -->
<g id="edge6" class="edge"><title>EmptyingWashWater&#45;&gt;FillingForRinse</title>
<path fill="none" stroke="black" d="M306.415,-891.755C306.988,-877.64 307.585,-862.912 308.167,-848.559"/>
<polygon fill="black" stroke="black" points="311.679,-848.321 308.587,-838.188 304.685,-848.038 311.679,-848.321"/>
<text text-anchor="middle" x="330.5" y="-861.4" font-family="Times Roman,serif" font-size="14.00">Empty</text>
</g>
<!-- Rinsing -->
<g id="node6" class="node"><title>Rinsing</title>
<polygon fill="none" stroke="black" points="494,-616 134,-616 134,-446 494,-446 494,-616"/>
<text text-anchor="start" x="141.5" y="-599.4" font-family="Times Roman,serif" font-size="14.00">Rinsing {} {</text>
<text text-anchor="start" x="141.5" y="-581.4" font-family="Times Roman,serif" font-size="14.00"> &#160;&#160;&#160;# Close water valve</text>
<text text-anchor="start" x="141.5" y="-563.4" font-family="Times Roman,serif" font-size="14.00"> &#160;&#160;&#160;puts &quot;[self]: Closing water valve&quot;</text>
<text text-anchor="start" x="141.5" y="-545.4" font-family="Times Roman,serif" font-size="14.00"> &#160;&#160;&#160;# Set motor to agitate</text>
<text text-anchor="start" x="141.5" y="-527.4" font-family="Times Roman,serif" font-size="14.00"> &#160;&#160;&#160;puts &quot;[self]: Setting motor to agitate&quot;</text>
<text text-anchor="start" x="141.5" y="-509.4" font-family="Times Roman,serif" font-size="14.00"> &#160;&#160;&#160;# Signal Done to self delayed by the rinse time</text>
<text text-anchor="start" x="141.5" y="-491.4" font-family="Times Roman,serif" font-size="14.00"> &#160;&#160;&#160;my variable rinse</text>
<text text-anchor="start" x="141.5" y="-473.4" font-family="Times Roman,serif" font-size="14.00"> &#160;&#160;&#160;my delayedSignal $rinse Done</text>
<text text-anchor="start" x="141.5" y="-455.4" font-family="Times Roman,serif" font-size="14.00">}</text>
</g>
<!-- FillingForRinse&#45;&gt;Rinsing -->
<g id="edge10" class="edge"><title>FillingForRinse&#45;&gt;Rinsing</title>
<path fill="none" stroke="black" d="M312.756,-669.693C312.883,-655.6 313.014,-640.889 313.143,-626.539"/>
<polygon fill="black" stroke="black" points="316.646,-626.198 313.236,-616.167 309.647,-626.135 316.646,-626.198"/>
<text text-anchor="middle" x="326" y="-639.4" font-family="Times Roman,serif" font-size="14.00">Full</text>
</g>
<!-- EmptyingRinseWater -->
<g id="node7" class="node"><title>EmptyingRinseWater</title>
<polygon fill="none" stroke="black" points="483,-392 215,-392 215,-224 483,-224 483,-392"/>
<text text-anchor="start" x="222.5" y="-375.4" font-family="Times Roman,serif" font-size="14.00">EmptyingRinseWater {} {</text>
<text text-anchor="start" x="222.5" y="-357.4" font-family="Times Roman,serif" font-size="14.00"> &#160;&#160;&#160;# Stop motor</text>
<text text-anchor="start" x="222.5" y="-339.4" font-family="Times Roman,serif" font-size="14.00"> &#160;&#160;&#160;puts &quot;[self]: Stopping motor&quot;</text>
<text text-anchor="start" x="222.5" y="-321.4" font-family="Times Roman,serif" font-size="14.00"> &#160;&#160;&#160;# Start pump</text>
<text text-anchor="start" x="222.5" y="-303.4" font-family="Times Roman,serif" font-size="14.00"> &#160;&#160;&#160;puts &quot;[self]: Starting pump&quot;</text>
<text text-anchor="start" x="222.5" y="-269.4" font-family="Times Roman,serif" font-size="14.00"> &#160;&#160;&#160;# SIMULATING THE TUB SENSOR</text>
<text text-anchor="start" x="222.5" y="-251.4" font-family="Times Roman,serif" font-size="14.00"> &#160;&#160;&#160;my delayedSignal 5000 Empty</text>
<text text-anchor="start" x="222.5" y="-233.4" font-family="Times Roman,serif" font-size="14.00">}</text>
</g>
<!-- Rinsing&#45;&gt;EmptyingRinseWater -->
<g id="edge12" class="edge"><title>Rinsing&#45;&gt;EmptyingRinseWater</title>
<path fill="none" stroke="black" d="M327.382,-445.739C329.624,-431.453 331.962,-416.557 334.236,-402.065"/>
<polygon fill="black" stroke="black" points="337.706,-402.531 335.799,-392.109 330.791,-401.445 337.706,-402.531"/>
<text text-anchor="middle" x="351.5" y="-415.4" font-family="Times Roman,serif" font-size="14.00">Done</text>
</g>
<!-- Spinning -->
<g id="node8" class="node"><title>Spinning</title>
<polygon fill="none" stroke="black" points="641,-170 287,-170 287,-4.26326e-14 641,-0 641,-170"/>
<text text-anchor="start" x="294.5" y="-153.4" font-family="Times Roman,serif" font-size="14.00">Spinning {} {</text>
<text text-anchor="start" x="294.5" y="-135.4" font-family="Times Roman,serif" font-size="14.00"> &#160;&#160;&#160;# Stop pump</text>
<text text-anchor="start" x="294.5" y="-117.4" font-family="Times Roman,serif" font-size="14.00"> &#160;&#160;&#160;puts &quot;[self]: Stopping pump&quot;</text>
<text text-anchor="start" x="294.5" y="-99.4" font-family="Times Roman,serif" font-size="14.00"> &#160;&#160;&#160;# Set motor to spin</text>
<text text-anchor="start" x="294.5" y="-81.4" font-family="Times Roman,serif" font-size="14.00"> &#160;&#160;&#160;puts &quot;[self]: Setting motor to spin&quot;</text>
<text text-anchor="start" x="294.5" y="-63.4" font-family="Times Roman,serif" font-size="14.00"> &#160;&#160;&#160;# Signal Done to self delayed by the spin time</text>
<text text-anchor="start" x="294.5" y="-45.4" font-family="Times Roman,serif" font-size="14.00"> &#160;&#160;&#160;my variable spin</text>
<text text-anchor="start" x="294.5" y="-27.4" font-family="Times Roman,serif" font-size="14.00"> &#160;&#160;&#160;my delayedSignal $spin Done</text>
<text text-anchor="start" x="294.5" y="-9.4" font-family="Times Roman,serif" font-size="14.00">}</text>
</g>
<!-- EmptyingRinseWater&#45;&gt;Spinning -->
<g id="edge14" class="edge"><title>EmptyingRinseWater&#45;&gt;Spinning</title>
<path fill="none" stroke="black" d="M392.477,-223.693C399.956,-209.189 407.773,-194.032 415.377,-179.286"/>
<polygon fill="black" stroke="black" points="418.607,-180.659 420.08,-170.167 412.386,-177.45 418.607,-180.659"/>
<text text-anchor="middle" x="432.5" y="-193.4" font-family="Times Roman,serif" font-size="14.00">Empty</text>
</g>
<!-- Spinning&#45;&gt;Idle -->
<g id="edge8" class="edge"><title>Spinning&#45;&gt;Idle</title>
<path fill="none" stroke="black" d="M496.982,-170.235C510.04,-211.243 522,-261.496 522,-308 522,-1431 522,-1431 522,-1431 522,-1477.5 509.005,-1527.14 494.294,-1568.45"/>
<polygon fill="black" stroke="black" points="490.97,-1567.35 490.831,-1577.94 497.546,-1569.75 490.97,-1567.35"/>
<text text-anchor="middle" x="540.5" y="-861.4" font-family="Times Roman,serif" font-size="14.00">Done</text>
</g>
</g>
</svg>
